<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PropDecoded - 3-Scenario Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
        .backdrop-blur-xl { backdrop-filter: blur(24px); }
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            opacity: 1;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900 min-h-screen">
    
    <div class="p-6">
        <div class="max-w-7xl mx-auto">
            <!-- Header -->
            <div class="bg-black bg-opacity-40 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6 mb-6">
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        <div class="bg-blue-500 p-3 rounded-xl">
                            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-3xl font-bold text-white tracking-tight">PropDecoded Calculator</h1>
                            <p class="text-blue-300 text-sm">3-Scenario Property Sale Simulator</p>
                        </div>
                    </div>
                    <div class="flex items-center gap-2 px-4 py-2 bg-yellow-500/20 rounded-lg border border-yellow-400/30">
                        <span class="text-yellow-200 text-sm font-medium">‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô</span>
                    </div>
                </div>
            </div>

            <!-- Main Grid -->
            <div class="grid grid-cols-3 gap-6 mb-6">
                <!-- Property Profile (Left) -->
                <div class="col-span-1 bg-black bg-opacity-40 backdrop-blur-xl border border-blue-500/30 rounded-2xl p-6">
                    <div class="flex items-center gap-2 mb-6">
                        <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"/>
                        </svg>
                        <h2 class="text-blue-300 font-bold text-lg uppercase tracking-wide">Property Profile</h2>
                    </div>

                    <div class="space-y-4">
                        <!-- Acquisition Date -->
                        <div>
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Acquisition Date</label>
                            <input type="date" id="acquisitionDate" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500" style="color-scheme: dark;" required/>
                        </div>

                        <!-- Primary Residence -->
                        <label class="flex items-center gap-2 cursor-pointer">
                            <input type="checkbox" id="isPrimaryResidence" class="w-4 h-4 text-blue-600 rounded"/>
                            <span class="text-blue-100 text-sm">Primary Residence (‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏Å)</span>
                        </label>

                        <!-- Current Status -->
                        <div>
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Current Status</label>
                            <select id="currentStatus" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm focus:ring-2 focus:ring-blue-500">
                                <option value="vacant">Vacant (‡∏ß‡πà‡∏≤‡∏á)</option>
                                <option value="rented">Rented (‡∏õ‡∏•‡πà‡∏≠‡∏¢‡πÄ‡∏ä‡πà‡∏≤)</option>
                            </select>
                        </div>

                        <!-- Monthly Rent -->
                        <div>
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Monthly Rent (Gross)</label>
                            <input type="number" id="monthlyRentGross" value="15000" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                        </div>

                        <div>
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Monthly Rent Cost</label>
                            <input type="number" id="monthlyRentCost" value="4500" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                        </div>

                        <!-- Monthly Costs -->
                        <div>
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Common Fee (Monthly)</label>
                            <input type="number" id="monthlyCommonFee" value="3000" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                        </div>

                        <div>
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Land Tax (Annual)</label>
                            <input type="number" id="annualLandTax" value="6000" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                        </div>

                        <div>
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Interest Payment (Monthly)</label>
                            <input type="number" id="monthlyInterestCost" value="8000" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                        </div>

                        <!-- Special Assessment Risk -->
                        <div class="pt-4 border-t border-blue-500/30">
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Special Assessment Risk</label>
                            <div class="space-y-3">
                                <div>
                                    <label class="text-blue-300/70 text-xs mb-1 block">Probability (0-1)</label>
                                    <input type="number" id="probSpecial" value="0.1" step="0.01" min="0" max="1" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                                </div>
                                <div>
                                    <label class="text-blue-300/70 text-xs mb-1 block">Amount (if occurs)</label>
                                    <input type="number" id="amountSpecial" value="50000" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                                </div>
                            </div>
                        </div>

                        <!-- Transaction Rates -->
                        <div class="pt-4 border-t border-blue-500/30">
                            <label class="text-blue-200 text-xs mb-2 block font-semibold">Transaction Rates</label>
                            <div class="space-y-3">
                                <div>
                                    <label class="text-blue-300/70 text-xs mb-1 block">Transfer Fee Rate (%)</label>
                                    <input type="number" id="transferFeeRate" value="2" step="0.1" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                                </div>
                                <div>
                                    <label class="text-blue-300/70 text-xs mb-1 block">Agent Fee Rate (%)</label>
                                    <input type="number" id="agentFeeRate" value="3" step="0.1" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                                </div>
                                <div>
                                    <label class="text-blue-300/70 text-xs mb-1 block">Other Costs Rate (%)</label>
                                    <input type="number" id="otherTxRate" value="0.5" step="0.1" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-400/30 rounded-lg text-white text-sm font-mono focus:ring-2 focus:ring-blue-500"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Scenario Settings (Right) -->
                <div class="col-span-2 space-y-6">
                    <!-- Scenario Cards -->
                    <div class="grid grid-cols-3 gap-6">
                        <!-- Best Case -->
                        <div class="bg-black bg-opacity-40 backdrop-blur-xl border-2 border-emerald-500/50 rounded-2xl p-6">
                            <div class="flex items-center gap-2 mb-4">
                                <span class="text-2xl">üéØ</span>
                                <h3 class="text-emerald-400 font-bold text-sm uppercase">BEST CASE</h3>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="text-gray-400 text-xs mb-2 block">Sale Price (THB)</label>
                                    <input type="number" id="bestPrice" value="6000000" class="w-full px-3 py-2 bg-slate-900/50 border border-emerald-500/30 rounded-lg text-white font-mono focus:ring-2 focus:ring-emerald-500"/>
                                </div>
                                <div>
                                    <label class="text-gray-400 text-xs mb-2 block">Wait (Months)</label>
                                    <input type="number" id="bestWait" value="3" class="w-full px-3 py-2 bg-slate-900/50 border border-emerald-500/30 rounded-lg text-white font-mono focus:ring-2 focus:ring-emerald-500"/>
                                </div>
                            </div>
                        </div>

                        <!-- Base Case -->
                        <div class="bg-black bg-opacity-40 backdrop-blur-xl border-2 border-blue-500/50 rounded-2xl p-6">
                            <div class="flex items-center gap-2 mb-4">
                                <span class="text-2xl">üìä</span>
                                <h3 class="text-blue-400 font-bold text-sm uppercase">BASE CASE</h3>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="text-gray-400 text-xs mb-2 block">Sale Price (THB)</label>
                                    <input type="number" id="basePrice" value="5500000" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-500/30 rounded-lg text-white font-mono focus:ring-2 focus:ring-blue-500"/>
                                </div>
                                <div>
                                    <label class="text-gray-400 text-xs mb-2 block">Wait (Months)</label>
                                    <input type="number" id="baseWait" value="6" class="w-full px-3 py-2 bg-slate-900/50 border border-blue-500/30 rounded-lg text-white font-mono focus:ring-2 focus:ring-blue-500"/>
                                </div>
                            </div>
                        </div>

                        <!-- Worst Case -->
                        <div class="bg-black bg-opacity-40 backdrop-blur-xl border-2 border-rose-500/50 rounded-2xl p-6">
                            <div class="flex items-center gap-2 mb-4">
                                <span class="text-2xl">‚ö†Ô∏è</span>
                                <h3 class="text-rose-400 font-bold text-sm uppercase">WORST CASE</h3>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="text-gray-400 text-xs mb-2 block">Sale Price (THB)</label>
                                    <input type="number" id="worstPrice" value="5000000" class="w-full px-3 py-2 bg-slate-900/50 border border-rose-500/30 rounded-lg text-white font-mono focus:ring-2 focus:ring-rose-500"/>
                                </div>
                                <div>
                                    <label class="text-gray-400 text-xs mb-2 block">Wait (Months)</label>
                                    <input type="number" id="worstWait" value="12" class="w-full px-3 py-2 bg-slate-900/50 border border-rose-500/30 rounded-lg text-white font-mono focus:ring-2 focus:ring-rose-500"/>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Calculate Button -->
                    <button
                        id="calculateBtn"
                        type="button"
                        class="w-full bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 hover:from-purple-500 hover:via-pink-500 hover:to-red-500 text-white py-5 rounded-2xl font-bold text-xl transition-all shadow-2xl flex items-center justify-center gap-4 cursor-pointer"
                        style="cursor: pointer;"
                    >
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"/>
                        </svg>
                        <span>CALCULATE ALL SCENARIOS</span>
                    </button>

                    <!-- Results Table -->
                    <div id="results" style="display:none;" class="bg-black bg-opacity-40 backdrop-blur-xl border border-slate-500/30 rounded-2xl p-6">
                        <div class="flex items-center justify-between mb-6">
                            <h3 class="text-slate-300 font-bold text-xl uppercase">Calculation Results</h3>
                            <span class="px-3 py-1 bg-yellow-500/20 text-yellow-300 text-xs font-semibold rounded-full border border-yellow-500/30">
                                ‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô
                            </span>
                        </div>
                        <div id="resultsTable"></div>
                        
                        <!-- Disclaimer -->
                        <div class="mt-6 bg-slate-900/50 border border-slate-700/50 rounded-lg p-4">
                            <p class="text-gray-400 text-xs leading-relaxed">
                                <strong>‡∏Ñ‡∏≥‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô:</strong> ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì‡∏Å‡∏≤‡∏£‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏±‡∏ö‡∏Å‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏î‡∏¥‡∏ô/‡∏™‡∏£‡∏£‡∏û‡∏≤‡∏Å‡∏£ ‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á‡∏Å‡πà‡∏≠‡∏ô‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡∏à‡∏£‡∏¥‡∏á ‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏ñ‡∏∑‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô ‡∏Å‡∏é‡∏´‡∏°‡∏≤‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏†‡∏≤‡∏©‡∏µ
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ==================== CALCULATION ENGINE ====================
        
        function calculateHoldingYears(acqDate, waitMonths) {
            const saleDate = new Date();
            saleDate.setMonth(saleDate.getMonth() + waitMonths);
            const diff = saleDate - new Date(acqDate);
            return diff / (1000 * 60 * 60 * 24 * 365.25);
        }

        function calcScenario(profile, scenario) {
            const { name, salePrice, waitMonths } = scenario;
            
            // 1) Holding period
            const holdingYears = calculateHoldingYears(profile.acquisitionDate, waitMonths);
            
            // 2) Tax: SBT vs Stamp
            let sbtRate = 0, stampRate = 0;
            if (profile.isPrimaryResidence) {
                stampRate = 0.005;
            } else if (holdingYears >= 5) {
                stampRate = 0.005;
            } else {
                sbtRate = 0.033;
            }
            
            const taxSBT = salePrice * sbtRate;
            const taxStamp = salePrice * stampRate;
            const taxTransfer = 0; // PIT/WHT ‡πÑ‡∏ß‡πâ‡∏≠‡∏ô‡∏≤‡∏Ñ‡∏ï
            
            // 3) Land tax per month
            const landTaxPerMonth = profile.annualLandTax / 12;
            
            // 4) Special assessment expected
            const expectedSpecialPerMonth = (profile.probSpecial * profile.amountSpecial) / 12;
            
            // 5) Opportunity cost
            let oppPerMonth = 0;
            if (profile.currentStatus === 'vacant') {
                oppPerMonth = profile.monthlyRentGross;
            } else if (profile.currentStatus === 'rented') {
                oppPerMonth = Math.max(profile.monthlyRentGross - profile.monthlyRentCost, 0);
            }
            
            // 6) Holding cost per month
            const holdingCostPerMonth = 
                profile.monthlyCommonFee +
                landTaxPerMonth +
                profile.monthlyInterestCost +
                expectedSpecialPerMonth +
                oppPerMonth;
            
            const holdingCostTotal = holdingCostPerMonth * waitMonths;
            
            // 7) Transaction cost
            const txRateTotal = (profile.transferFeeRate + profile.agentFeeRate + profile.otherTxRate) / 100;
            const transactionCost = salePrice * txRateTotal;
            
            // 8) Total tax
            const taxTotal = taxSBT + taxStamp + taxTransfer;
            
            // 9) Net proceed
            const net = salePrice - transactionCost - taxTotal - holdingCostTotal;
            
            return {
                name,
                salePrice,
                waitMonths,
                holdingYears: holdingYears.toFixed(2),
                taxSBT,
                taxStamp,
                taxTransfer,
                taxTotal,
                transactionCost,
                holdingCostTotal,
                holdingCostPerMonth,
                oppPerMonth,
                net
            };
        }

        function runCalculation() {
            const acqDate = document.getElementById('acquisitionDate').value;
            if (!acqDate) {
                alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ã‡∏∑‡πâ‡∏≠ (Acquisition Date)');
                return;
            }

            // Gather profile
            const profile = {
                acquisitionDate: acqDate,
                isPrimaryResidence: document.getElementById('isPrimaryResidence').checked,
                currentStatus: document.getElementById('currentStatus').value,
                monthlyRentGross: parseFloat(document.getElementById('monthlyRentGross').value) || 0,
                monthlyRentCost: parseFloat(document.getElementById('monthlyRentCost').value) || 0,
                monthlyCommonFee: parseFloat(document.getElementById('monthlyCommonFee').value) || 0,
                annualLandTax: parseFloat(document.getElementById('annualLandTax').value) || 0,
                monthlyInterestCost: parseFloat(document.getElementById('monthlyInterestCost').value) || 0,
                probSpecial: parseFloat(document.getElementById('probSpecial').value) || 0,
                amountSpecial: parseFloat(document.getElementById('amountSpecial').value) || 0,
                transferFeeRate: parseFloat(document.getElementById('transferFeeRate').value) || 0,
                agentFeeRate: parseFloat(document.getElementById('agentFeeRate').value) || 0,
                otherTxRate: parseFloat(document.getElementById('otherTxRate').value) || 0
            };

            // Gather scenarios
            const scenarios = [
                {
                    name: 'Best',
                    salePrice: parseFloat(document.getElementById('bestPrice').value),
                    waitMonths: parseInt(document.getElementById('bestWait').value)
                },
                {
                    name: 'Base',
                    salePrice: parseFloat(document.getElementById('basePrice').value),
                    waitMonths: parseInt(document.getElementById('baseWait').value)
                },
                {
                    name: 'Worst',
                    salePrice: parseFloat(document.getElementById('worstPrice').value),
                    waitMonths: parseInt(document.getElementById('worstWait').value)
                }
            ];

            // Calculate
            const results = scenarios.map(s => calcScenario(profile, s));
            
            // Display
            displayResults(results);
        }

        function displayResults(results) {
            const colors = {
                'Best': {bg: 'bg-emerald-900/20', text: 'text-emerald-400', border: 'border-emerald-500/30'},
                'Base': {bg: 'bg-blue-900/20', text: 'text-blue-400', border: 'border-blue-500/30'},
                'Worst': {bg: 'bg-rose-900/20', text: 'text-rose-400', border: 'border-rose-500/30'}
            };

            const rows = [
                {label: 'Sale Price', key: 'salePrice', format: 'currency'},
                {label: 'Wait Period', key: 'waitMonths', format: 'months'},
                {label: 'Holding Period', key: 'holdingYears', format: 'years'},
                {label: 'SBT Tax (3.3%)', key: 'taxSBT', format: 'currency'},
                {label: 'Stamp Duty (0.5%)', key: 'taxStamp', format: 'currency'},
                {label: 'Transaction Cost', key: 'transactionCost', format: 'currency'},
                {label: 'Holding Cost (Total)', key: 'holdingCostTotal', format: 'currency'},
                {label: 'Total Tax', key: 'taxTotal', format: 'currency'},
            ];

            let html = `
            <div class="overflow-x-auto">
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-slate-700">
                            <th class="text-left text-gray-400 font-semibold py-3 px-4">Item</th>`;
            
            results.forEach(r => {
                const c = colors[r.name];
                html += `<th class="text-right ${c.text} font-semibold py-3 px-4">${r.name}</th>`;
            });
            
            html += `</tr></thead><tbody>`;

            rows.forEach((row, idx) => {
                html += `<tr class="border-b border-slate-800/50 ${idx % 2 === 0 ? 'bg-slate-900/30' : ''}">
                    <td class="text-gray-300 py-3 px-4">${row.label}</td>`;
                
                results.forEach(r => {
                    let value = r[row.key];
                    if (row.format === 'currency') {
                        value = value.toLocaleString() + ' ‡∏ø';
                    } else if (row.format === 'months') {
                        value = value + ' months';
                    } else if (row.format === 'years') {
                        value = value + ' years';
                    }
                    html += `<td class="text-right text-white font-mono py-3 px-4">${value}</td>`;
                });
                
                html += `</tr>`;
            });

            // Net Proceed (Highlight)
            html += `<tr class="border-t-2 border-slate-600">
                <td class="text-gray-200 font-bold py-4 px-4 text-base">NET PROCEED</td>`;
            
            results.forEach(r => {
                const c = colors[r.name];
                html += `<td class="text-right py-4 px-4">
                    <div class="${c.bg} ${c.border} border-2 rounded-lg p-3">
                        <div class="${c.text} text-2xl font-bold font-mono">${r.net.toLocaleString()}</div>
                        <div class="text-gray-400 text-xs mt-1">THB</div>
                    </div>
                </td>`;
            });
            
            html += `</tr></tbody></table></div>`;

            document.getElementById('resultsTable').innerHTML = html;
            document.getElementById('results').style.display = 'block';
        }

        // Event Listeners
        window.addEventListener('load', function() {
            const calcBtn = document.getElementById('calculateBtn');
            if (calcBtn) {
                calcBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    runCalculation();
                });
            }
        });
    </script>
</body>
</html>
